{% if properties.show_footer_icons %}

    {% set randomIdForDropdown = random(999999) %}

    <div class="dataTableIcons">
        <a class='dropdown-button btn-flat btn-floating'
           style="text-align: center;" href='#' title="{{ 'General_ExportThisReport'|translate|e('html_attr') }}"
           data-activates='dropdownExport{{ randomIdForDropdown }}'><span class="icon-export"></span></a>

        <a class='dropdown-button btn-flat btn-floating dropdownConfigureIcon'
           style="text-align: center;" href='#'
           data-activates='dropdownConfigure{{ randomIdForDropdown }}'><span class="icon-configure"></span></a>

        {% if isPluginLoaded('Annotations') and not properties.hide_annotations_view %}
            <a class='btn-flat btn-floating annotationView'
               style="text-align: center;" href='#' title="{{ 'Annotations_Annotations'|translate|e('html_attr') }}"
            ><span class="icon-annotation"></span></a>
        {% endif %}

        <a class='dropdown-button btn-flat btn-floating'
           style="text-align: center;" href='#'
           data-activates='dropdownVisualizations{{ randomIdForDropdown }}'><span class="icon-more-verti"></span></a>

        <ul id='dropdownVisualizations{{ randomIdForDropdown }}' class='dropdown-content dataTableFooterIcons'>
            {% for footerIconGroup in footerIcons %}
                {% for footerIcon in footerIconGroup.buttons if footerIcon.icon %}
                    <li>
                    <span class="{{ footerIconGroup.class }}">
                        {% set isActiveEcommerceView = clientSideParameters.abandonedCarts is defined and
                        ((footerIcon.id == 'ecommerceOrder' and clientSideParameters.abandonedCarts == 0) or
                        (footerIcon.id == 'ecommerceAbandonedCart' and clientSideParameters.abandonedCarts == 1)) %}
                        <span>
                            <a class="tableIcon {% if clientSideParameters.viewDataTable == footerIcon.id or isActiveEcommerceView %}activeIcon{% endif %}" data-footer-icon-id="{{ footerIcon.id }}">
                                {% if footerIcon.icon starts with 'icon-' %}
                                    <span title="{{ footerIcon.title }}" class="{{ footerIcon.icon }}"/>
                                {% else %}
                                    <img width="16" height="16" title="{{ footerIcon.title }}" src="{{ footerIcon.icon }}"/>
                                {% endif %}
                                {% if footerIcon.title is defined %}<span>{{ footerIcon.title }}</span>{% endif %}
                            </a>
                        </span>
                    </span>
                    </li>
                {% endfor %}
                <li class="divider"></li>
            {% endfor %}
        </ul>
        <ul id='dropdownExport{{ randomIdForDropdown }}' class='dropdown-content exportToFormatItems'>
            {% set requestParams = properties.request_parameters_to_modify|json_encode %}
            <li><a target="_blank" requestParams="{{ requestParams|e('html_attr') }}" methodToCall="{{ properties.apiMethodToRequestDataTable }}" format="CSV" filter_limit="{{ properties.export_limit }}">CSV</a></li>
            <li><a target="_blank" requestParams="{{ requestParams|e('html_attr') }}" methodToCall="{{ properties.apiMethodToRequestDataTable }}" format="TSV" filter_limit="{{ properties.export_limit }}">TSV (Excel)</a></li>
            <li><a target="_blank" requestParams="{{ requestParams|e('html_attr') }}" methodToCall="{{ properties.apiMethodToRequestDataTable }}" format="XML" filter_limit="{{ properties.export_limit }}">XML</a></li>
            <li><a target="_blank" requestParams="{{ requestParams|e('html_attr') }}" methodToCall="{{ properties.apiMethodToRequestDataTable }}" format="JSON" filter_limit="{{ properties.export_limit }}">Json</a></li>
            <li><a target="_blank" requestParams="{{ requestParams|e('html_attr') }}" methodToCall="{{ properties.apiMethodToRequestDataTable }}" format="PHP" filter_limit="{{ properties.export_limit }}">Php</a></li>
            {% if properties.show_export_as_rss_feed %}
                <li><a target="_blank" requestParams="{{ requestParams|e('html_attr') }}" methodToCall="{{ properties.apiMethodToRequestDataTable }}" format="RSS" filter_limit="{{ properties.export_limit }}" date="last10">
                        <span class="icon-feed"></span> RSS
                    </a>
                </li>
            {% endif %}
            {% if properties.show_export_as_image_icon %}
                <li><span id="dataTableFooterExportAsImageIcon">
                        <a class="tableIcon" href="#" onclick="$(this).closest('.dataTable').find('div.jqplot-target').trigger('piwikExportAsImage'); return false;">
                            <img title="{{ 'General_ExportAsImage'|translate }}" src="plugins/Morpheus/images/image.png"/>
                        </a>
                    </span>
                </li>
            {% endif %}
        </ul>
        <ul id='dropdownConfigure{{ randomIdForDropdown }}' class='dropdown-content tableConfiguration'>
            {% if properties.show_flatten_table %}
                {% if clientSideParameters.flat is defined and clientSideParameters.flat == 1 %}
                    <li>
                        <div class="configItem dataTableIncludeAggregateRows"></div>
                    </li>
                {% endif %}
                <li>
                    <div class="configItem dataTableFlatten"></div>
                </li>
            {% endif %}
            {% if properties.show_exclude_low_population %}
                <li>
                    <div class="configItem dataTableExcludeLowPopulation"></div>
                </li>
            {% endif %}
            {% if properties.show_pivot_by_subtable|default is not empty %}
                <li>
                    <div class="configItem dataTablePivotBySubtable"></div>
                </li>
            {% endif %}
        </ul>
    </div>
{% endif %}