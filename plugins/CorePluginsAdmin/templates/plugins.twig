{% extends 'admin.twig' %}

{% import '@CorePluginsAdmin/macros.twig' as plugins %}

{% set title %}{{ 'CorePluginsAdmin_PluginsManagement'|translate }}{% endset %}

{% block content %}

{% if pluginsHavingUpdate|length %}
    <div piwik-content-block content-title="{{ pluginsHavingUpdate|length }} Update(s) available">

        <p>{{ 'CorePluginsAdmin_InfoPluginUpdateIsRecommended'|translate }}</p>

        {{ plugins.tablePluginUpdates(pluginsHavingUpdate, updateNonce, activateNonce, 0) }}
    </div>
{% endif %}

<div piwik-content-block content-title="{{ title|e('html_attr') }}" feature="true" piwik-plugin-management>

    <p>{{ 'CorePluginsAdmin_PluginsExtendPiwik'|translate }}
        {{ 'CorePluginsAdmin_OncePluginIsInstalledYouMayActivateHere'|translate }}

    {% if not isPluginsAdminEnabled %}
        <br/>{{ 'CorePluginsAdmin_DoMoreContactPiwikAdmins'|translate }}
    {% endif %}

        <br />
        {{ 'CorePluginsAdmin_ChangeLookByManageThemes'|translate('<a href="' ~ linkTo({'action': 'themes'}) ~'">', '</a>')|raw }}
    </p>

    {{ plugins.pluginsFilter(false, isMarketplaceEnabled) }}

    {{ plugins.tablePlugins(pluginsInfo, pluginNamesHavingSettings, activateNonce, deactivateNonce, uninstallNonce, false, marketplacePluginNames, isPluginsAdminEnabled) }}

</div>

{% endblock %}